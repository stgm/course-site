<% if current_user.admin? %>

<% if current_schedule.present? %>
<%= menu_group current_schedule.name do %>
	<%= menu_link 'Overview', overview_path, icon: 'columns' %>
	<%= menu_link 'Notes', notes_path, icon: 'journal-bookmark' %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen' %>
	<%= menu_link 'Announcements...', alerts_path, icon: 'bell-fill', target: 'modal' %>
	<%= menu_link 'Tests...', tests_path, icon: 'check', target: 'modal', condition: Settings.tests_present %>
	<%= menu_link 'Set module...', edit_schedule_current_module_path(current_schedule), icon: 'calendar', target: 'modal', condition: current_schedule.can_admin_set_module? %>
<% end %>
<% end %>

<% if current_user.accessible_schedules.many? %>
<%= menu_group 'Your schedules' do %>
	<% current_user.accessible_schedules.all.each do |s| %>
	<%= menu_link s.name, profile_set_schedule_path(schedule_id: s.id), method: :patch, icon: (s==current_schedule ? 'check' : nil), data: { turbo: "false" } %>
	<% end %>
<% end%>
<% end %>

<% if Settings.hands_allow %>
<%= menu_group 'Hands' do %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill' %>
	<%= menu_link 'Hands statistics...', hands_statistics_path, icon: 'hand', target: 'modal' %>
<% end %>
<% end %>

<%= menu_group 'Course' do %>
	<%= menu_link 'Course administration...', admin_course_path, icon: 'inboxes', target: 'modal' %>
	<%= menu_link 'Site configuration...', admin_site_path, icon: 'wrench', target: 'modal' %>
	<%= menu_link 'Edit permissions...', admin_users_path, icon: 'unlock', target: 'modal' %>
	<%= menu_link 'Update courseware', admin_update_path, icon: 'download', method: :post, data: { turbo: "false" } %>
<% end %>

<% elsif current_user.head? %>

<%= menu_group do %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill', condition: Settings.hands_allow %>
<% end if Settings.hands_allow %>
	
<% if current_user.accessible_schedules.any? %>
<%= menu_group current_schedule.name do %>
	<%= menu_link 'Overview', overview_path, icon: 'columns' %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen' %>
	<%= menu_link 'Tests...', tests_path, icon: 'check', target: 'modal', condition: Settings.tests_present %>
<% end %>
<% end %>

<% if current_user.accessible_schedules.many? %>
<%= menu_group 'Your schedules' do %>
	<% current_user.accessible_schedules.all.each do |s| %>
	<%= menu_link s.name, [current_user, user: {schedule_id: s.id}], method: :patch, icon: (s==current_schedule ? 'check' : nil) %>
	<% end %>
<% end%>
<% end %>

<% elsif current_user.assistant? %>

<%= menu_group do %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill', condition: Settings.hands_allow %>
	<%= menu_link 'Overview', overview_path, icon: 'columns', condition: current_user.groups.any? || current_user.schedules.any? %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen', condition: !Schedule.exists? || current_user.groups.any? || current_user.schedules.any? %>
<% end %>

<% end%>

<%= menu_link 'Logout', session_logout_path, icon: 'box-arrow-right', data: { turbo: "false" } %>

<% if current_user.admin? %>

<%= menu_group current_schedule.name do %>
	<%= menu_link 'Overview', overview_path, icon: 'columns' %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen' %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill', condition: Settings.hands_allow %>
	<%= menu_link 'Announcements...', alerts_path, icon: 'bell-fill', remote: true %>
	<%= menu_link 'Tests...', tests_path, icon: 'check', remote: true, condition: Settings.tests_present %>
	<%= menu_link 'Set module...', edit_schedule_current_module_path(current_schedule), icon: 'calendar', remote: true, condition: current_schedule.can_admin_set_module? %>
<% end %>

<% if current_user.accessible_schedules.many? %>
<%= menu_group 'Your schedules' do %>
	<% Schedule.all.each do |s| %>
	<%= menu_link s.name, [current_user, user: {schedule_id: s.id}], method: :patch, icon: (s==current_schedule ? 'check' : nil) %>
	<% end %>
<% end%>
<% end %>

<%= menu_group 'Course' do %>
	<%= menu_link 'Course administration...', admin_course_path, icon: 'inboxes', remote: true %>
	<%= menu_link 'Site configuration...', admin_site_path, icon: 'wrench', remote: true %>
	<%= menu_link 'Edit permissions...', admin_users_path, icon: 'unlock', remote: true %>
	<%= menu_link 'Update courseware', admin_update_path, icon: 'download', method: :post %>
<% end %>

<% elsif current_user.head? %>

<%= menu_group do %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill', condition: Settings.hands_allow %>
<% end %>
	
<%= menu_group do %>
	<%= menu_link 'Overview', overview_path, icon: 'columns' %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen' %>
	<%= menu_link 'Tests...', tests_path, icon: 'check', remote: true, condition: Settings.tests_present %>
<% end %>

<% elsif current_user.assistant? %>

<%= menu_group do %>
	<%= menu_link 'Hands', hands_path, icon: 'people-fill', condition: Settings.hands_allow %>
	<%= menu_link 'Overview', overview_path, icon: 'columns', condition: current_user.groups.any? || current_user.schedules.any? %>
	<%= menu_link 'Grading', grading_index_path, icon: 'pen', condition: !Schedule.exists? || current_user.groups.any? || current_user.schedules.any? %>
<% end %>

<% end%>

<%= menu_link 'Logout', session_logout_path, icon: 'box-arrow-right' %>
